<% if @project_allocation.errors.any? %>
  <div class="notification is-danger">
    <ul>
      <% @project_allocation.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="field">
  <label class="label">Project</label>
  <div class="control">
    <div class="select">
      <select name="project_allocation[project_id]" required>
        <% @projects.each do |project| %>
          <option value="<%= project.id %>" <%= 'selected' if @project_allocation.project_id == project.id %>>
            <%= project.name %>
          </option>
        <% end %>
      </select>
    </div>
  </div>
</div>

<div class="field">
  <label class="label">Period Start</label>
  <div class="control">
    <input class="input" type="date" name="project_allocation[period_start]" value="<%= @project_allocation.period_start %>" required>
  </div>
</div>

<div class="field">
  <label class="label">Period Type</label>
  <div class="control">
    <div class="select">
      <select name="project_allocation[period_type]" required>
        <option value="week" <%= 'selected' if @project_allocation.period_type == 'week' %>>Week</option>
        <option value="month" <%= 'selected' if @project_allocation.period_type == 'month' %>>Month</option>
      </select>
    </div>
  </div>
</div>

<div class="field">
  <label class="label">Allocation (%)</label>
  <div class="control">
    <input class="input" type="number" step="0.01" min="0" max="100" name="project_allocation[allocation]" value="<%= @project_allocation.allocation %>" required>
  </div>
</div>

<div class="field">
  <label class="label">Source</label>
  <div class="control">
    <div class="select">
      <select name="project_allocation[source]" required>
        <option value="manual" <%= 'selected' if @project_allocation.source == 'manual' %>>Manual</option>
        <option value="import" <%= 'selected' if @project_allocation.source == 'importe' %>>Import</option>
      </select>
    </div>
  </div>
</div>

<div class="field">
  <div class="control">
    <button type="submit" class="button is-primary">Save Project Allocation</button>
  </div>
</div> 