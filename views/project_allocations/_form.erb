<% if @project_allocation.errors.any? %>
  <div class="alert alert-danger">
    <ul class="mb-0">
      <% @project_allocation.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="mb-3">
  <label for="project_id" class="form-label">Project</label>
  <select class="form-select" id="project_id" name="project_allocation[project_id]" required>
    <option value="">Select a project</option>
    <% @projects.each do |project| %>
      <option value="<%= project.id %>" <%= 'selected' if @project_allocation.project_id == project.id %>>
        <%= project.name %>
      </option>
    <% end %>
  </select>
</div>

<div class="mb-3">
  <label for="period_start" class="form-label">Period Start</label>
  <input type="date" class="form-control" id="period_start" name="project_allocation[period_start]" value="<%= @project_allocation.period_start %>" required>
</div>

<div class="mb-3">
  <label for="period_type" class="form-label">Period Type</label>
  <select class="form-select" id="period_type" name="project_allocation[period_type]" required>
    <option value="">Select a period type</option>
    <option value="week" <%= 'selected' if @project_allocation.period_type == 'week' %>>Week</option>
    <option value="month" <%= 'selected' if @project_allocation.period_type == 'month' %>>Month</option>
  </select>
</div>

<div class="mb-3">
  <label for="allocation" class="form-label">Allocation (person-days)</label>
  <input type="number" class="form-control" id="allocation" name="project_allocation[allocation]" value="<%= @project_allocation.allocation %>" step="0.5" min="0" max="100" required>
</div>

<div class="mb-3">
  <label for="source" class="form-label">Source</label>
  <select class="form-select" id="source" name="project_allocation[source]" required>
    <option value="">Select a source</option>
    <option value="manual" <%= 'selected' if @project_allocation.source == 'manual' %>>Manual</option>
    <option value="imported" <%= 'selected' if @project_allocation.source == 'imported' %>>Imported</option>
  </select>
</div>

<div class="d-flex justify-content-end gap-2">
  <a href="/project_allocations" class="btn btn-light">Cancel</a>
  <button type="submit" class="btn btn-primary">Save Project Allocation</button>
</div> 